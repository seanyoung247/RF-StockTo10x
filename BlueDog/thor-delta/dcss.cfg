
// Daleth-III-DHSS 2.5m Interstage - (bluedog_DCSS_Interstage)
@PART[bluedog_DCSS_Interstage]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @title = Daleth-III-DHSS 4m Interstage
	@description = 4m Interstage decoupler for the Daleth Hydrogen Second Stage. Attach to the bottom of the DHSS's hydrogen tank.
	@bulkheadProfiles = size3p5
    
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchDiameter]] {
        @SUBTYPE[2.5m] {
			@name = 4m
		}
		@SUBTYPE[1.875m] {
            @name = 3m
		}
		@SUBTYPE[3.125m] {
            @name = 5m
		}
		@SUBTYPE[3.125m??Alt?] {
            @name = 5m (Alt)
		}
		@SUBTYPE[3.125m??Delta?IV?] {
            @name = 5m (Delta IV)
		}
    }
    
	-MODULE[TweakScale],* {}
}

// SXA 0.9375m Payload Adapter - (bluedog_DCSS_PayloadAdapter_0p9375m)
@PART[bluedog_DCSS_PayloadAdapter_0p9375m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size1p2
    @title = SXA 1.5m Payload Adapter
    
	-MODULE[TweakScale],* {}
}

// SGA 1.875m Payload Adapter - (bluedog_DCSS_PayloadAdapter_1p875m)
// SPA 2.5m Payload Adapter - (bluedog_DCSS_PayloadAdapter_2p5m)
@PART[bluedog_DCSS_PayloadAdapter_1p875m,bluedog_DCSS_PayloadAdapter_2p5m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size2p5
    @title = SGA 3m Payload Adapter

    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchDiameter]] {
        @SUBTYPE[0.625m] {
            @name = 1m
        }
        @SUBTYPE[0.9375m] {
            @name = 1.5m
        }
        @SUBTYPE[1.25m] {
            @name = 2m
        }
    }
    -MODULE[TweakScale] {}
}
@PART[bluedog_DCSS_PayloadAdapter_2p5m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @bulkheadProfiles = size3p5
    @title = SPA 4m Payload Adapter
}

// Daleth-III-DHSS 3.125-2.5m Structural Adapter - (bluedog_DCSS_StructAdapter)
@PART[bluedog_DCSS_StructAdapter]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @title = Daleth-III-DHSS 5-4m Structural Adapter
	@description = A series of 5m to 4m adapters made from surplus DHSS interstages. We're sure you can find many uses for these.
	@bulkheadProfiles = size4, size3p5

    -MODULE[TweakScale] {}
}

// Daleth-III-DHSS Cryogenic Upper Stage - (bluedog_DCSS_Tank)
@PART[bluedog_DCSS_Tank]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass = 2.0
    %rescaleFactor = 1.6
    @bulkheadProfiles = size4, size3p5, srf

    MODULE {
		name = ModuleFuelTanks
        volume = 128575
		type = Cryogenic
	}

    @MODULE[ModuleRCSFX],* {
        @resourceName = Hydrazine
        @atmosphereCurve {
			@key,0 = 0 220
		}
    }

    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[volumeSwitch]] {
        -parentID = 0
		@SUBTYPE[Delta?IV??4m?] {
            -volumeAddedToParent = 0
            MODULE {
                IDENTIFIER {
                    name = ModuleFuelTanks
                }
                DATA {
                    volume = 161020
                }
            }
			@addedMass = 0
            @NODE[top] {
				@position = 0.0, 1.669, 0.0     //2.6704
			}
			@NODE[bottom] {
				@position = 0.0, 0.18722375, 0.0   //0.299558
			}
        }
	}

 	!RESOURCE[*],* {}
 	-MODULE[TweakScale],* {}
}

// TSS-2B Dual Payload Adapter Base (bluedog_Delta2_dpaf_base)
@PART[bluedog_Delta2_dpaf_base]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size2

 	-MODULE[TweakScale],* {}
}
// TSS-2B Dual Payload Adapter (bluedog_Delta2_dpaf_top)
@PART[bluedog_Delta2_dpaf_top]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5

 	-MODULE[TweakScale],* {}
}

//
// Delta IV
//
// TSS-5B Dual Payload Adapter Base - (bluedog_Delta4_dpaf_base)
@PART[bluedog_Delta4_dpaf_base]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5

    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchMount]] {
        @SUBTYPE[2.5m] {
			name = 4m
			title = Delta IV 4m
		}

		@SUBTYPE[3m] {
			name = 3m
			title = Atlas V 3m
		}
    }

 	-MODULE[TweakScale],* {}
}

// TSS-5F Dual Payload Adapter - (bluedog_Delta4_dpaf_top)
@PART[bluedog_Delta4_dpaf_top]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5

 	-MODULE[TweakScale],* {}
}

// Daleth IV 3.125m to 1.5m Interstage - (bluedog_DeltaIV_smallInterstage)
@PART[bluedog_DeltaIV_smallInterstage]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size4, size2p5

    @title = Daleth IV 5m to 2.5m Interstage
	@description = We dont know why you want to do this but this interstage enables the use of 2.5m upper stages with a 5m core. Also has an additional option for 3m stages.
	
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchDiameter]] {
		@SUBTYPE[1.5m] {
			@name = 2.5m
		}

		@SUBTYPE[1.875m] {
			@name = 3m
		}
	}

 	-MODULE[TweakScale],* {}
}

// SPA 3.125m Payload Adapter - (bluedog_DeltaIV_DCSS_3p125_payloadAdapter)
@PART[bluedog_DeltaIV_DCSS_3p125_payloadAdapter]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5

    @title = SPA 5m Payload Adapter
	@description = Standalone version of the payload adapter truss from the 5m DHSS fairing base.

 	-MODULE[TweakScale],* {}
}

// Daleth-IV-DHSS Cryogenic Upper Stage - (bluedog_DeltaIV_DCSS_5m)
@PART[bluedog_DeltaIV_DCSS_5m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass = 3
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5, size2p5, srf

    MODULE {
		name = ModuleFuelTanks
        moduleID = main-tanks
        volume = 204500
		type = Cryogenic
	}
    MODULE {
		name = ModuleFuelTanks
        moduleID = RCS-tanks
        volume = 820
		type = ServiceModule
	}
    
    @MODULE[ModuleRCSFX],* {
        @resourceName = Hydrazine
        @atmosphereCurve {
			@key,0 = 0 220
		}
    }

    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchLength]] {
		!parentID = 0
        @SUBTYPE[Double] {
			!volumeAddedToParent = 0
            MODULE {
                IDENTIFIER {
                    name = ModuleFuelTanks
                    moduleID = main-tanks
                }
                DATA {
                    volume = 210000
                }
            }
            @NODE[top] {
				@position = 0.0, 1.5242875, 0.0 //2.46798
			}
		}
	}
    
    !RESOURCE[*],* {}
 	-MODULE[TweakScale],* {}
}

// Daleth IV DHSS 3.125m Fairing Base - (bluedog_DeltaIV_DCSS_fairingBase)
@PART[bluedog_DeltaIV_DCSS_fairingBase]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size4

    @title = Daleth IV DHSS 5m Fairing Base
	@description = 5m fairing base with integrated payload attach fitting truss.

	@MODULE[ModuleProceduralFairing] {
        @baseRadius = 2.5
        @maxRadius = 5
    }

 	-MODULE[TweakScale],* {}
}


// TEMP
@PART[bluedog_CentaurD_RL10B2]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x]
{
	@mass = 0.315
	%rescaleFactor = 1.6
	@category = Engine
	
	@MODULE[ModuleEngine*]
	{
		@name = ModuleEnginesRF
		@maxThrust = 110
		@atmosphereCurve
	   	{
			@key,0 = 0 462
			@key,1 = 1 100
		}
		!PROPELLANT[LiquidFuel] {}
		!PROPELLANT[Oxidizer] {}
		!PROPELLANT[MonoPropellant] {}
		
		PROPELLANT
		{
			name = LqdHydrogen
			ratio = 1
			DrawGauge = True
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.365				//5.88 by mass
			resourceFlowMode = STACK_PRIORITY_SEARCH
		}
	}
	
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesRF
		modded = false
							
		configuration = Inon-R-10A41
	
		CONFIG
		{
			name = Inon-R-10A41
			maxThrust = 110
			
			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 1
				DrawGauge = True
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.365				//5.88 by mass
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}
			
			atmosphereCurve
			{
				key = 0 462
				key = 1 100
				key = 9 0.1
			}
			
			ignitions = 4
			ullage = true
			pressureFed = false
				
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.1
			}
		}
	}

  	 //Engine configs fullfilled by RealFuels configs, so we can remove B9PartSwitch
 	-MODULE[ModuleB9PartSwitch]:HAS[#moduleID[engineSwitch]] {}
} 