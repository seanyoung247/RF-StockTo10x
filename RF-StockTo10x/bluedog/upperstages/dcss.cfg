
// Daleth-III-DHSS 2.5m Interstage - (bluedog_DCSS_Interstage)
@PART[bluedog_DCSS_Interstage]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @title = Daleth-III-DHSS 4m Interstage
	@description = 4m Interstage decoupler for the Daleth Hydrogen Second Stage. Attach to the bottom of the DHSS's hydrogen tank.
	@bulkheadProfiles = size3p5
    
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchDiameter]] {
        @SUBTYPE[2.5m] {
			@name = 4m
		}
		@SUBTYPE[1.875m] {
            @name = 3m
		}
		@SUBTYPE[3.125m] {
            @name = 5m
		}
		@SUBTYPE[3.125m??Alt?] {
            @name = 5m (Alt)
		}
		@SUBTYPE[3.125m??Delta?IV?] {
            @name = 5m (Delta IV)
		}
    }
    
	-MODULE[TweakScale],* {}
}

// SXA 0.9375m Payload Adapter - (bluedog_DCSS_PayloadAdapter_0p9375m)
@PART[bluedog_DCSS_PayloadAdapter_0p9375m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size1p2
    @title = SXA 1.5m Payload Adapter
    
	-MODULE[TweakScale],* {}
}

// SGA 1.875m Payload Adapter - (bluedog_DCSS_PayloadAdapter_1p875m)
// SPA 2.5m Payload Adapter - (bluedog_DCSS_PayloadAdapter_2p5m)
@PART[bluedog_DCSS_PayloadAdapter_1p875m,bluedog_DCSS_PayloadAdapter_2p5m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size2p5
    @title = SGA 3m Payload Adapter

    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchDiameter]] {
        @SUBTYPE[0.625m] {
            @name = 1m
        }
        @SUBTYPE[0.9375m] {
            @name = 1.5m
        }
        @SUBTYPE[1.25m] {
            @name = 2m
        }
    }
    -MODULE[TweakScale] {}
}
@PART[bluedog_DCSS_PayloadAdapter_2p5m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @bulkheadProfiles = size3p5
    @title = SPA 4m Payload Adapter
}

// Daleth-III-DHSS 3.125-2.5m Structural Adapter - (bluedog_DCSS_StructAdapter)
@PART[bluedog_DCSS_StructAdapter]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @title = Daleth-III-DHSS 5-4m Structural Adapter
	@description = A series of 5m to 4m adapters made from surplus DHSS interstages. We're sure you can find many uses for these.
	@bulkheadProfiles = size4, size3p5

    -MODULE[TweakScale] {}
}

// TSS-2B Dual Payload Adapter Base (bluedog_Delta2_dpaf_base)
@PART[bluedog_Delta2_dpaf_base]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size2

 	-MODULE[TweakScale],* {}
}
// TSS-2B Dual Payload Adapter (bluedog_Delta2_dpaf_top)
@PART[bluedog_Delta2_dpaf_top]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5

 	-MODULE[TweakScale],* {}
}

//
// Delta IV
//
// TSS-5B Dual Payload Adapter Base - (bluedog_Delta4_dpaf_base)
@PART[bluedog_Delta4_dpaf_base]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5

    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchMount]] {
        @SUBTYPE[2.5m] {
			name = 4m
			title = Delta IV 4m
		}

		@SUBTYPE[3m] {
			name = 3m
			title = Atlas V 3m
		}
    }

 	-MODULE[TweakScale],* {}
}

// TSS-5F Dual Payload Adapter - (bluedog_Delta4_dpaf_top)
@PART[bluedog_Delta4_dpaf_top]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5

 	-MODULE[TweakScale],* {}
}

// Daleth IV 3.125m to 1.5m Interstage - (bluedog_DeltaIV_smallInterstage)
@PART[bluedog_DeltaIV_smallInterstage]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size4, size2p5

    @title = Daleth IV 5m to 2.5m Interstage
	@description = We dont know why you want to do this but this interstage enables the use of 2.5m upper stages with a 5m core. Also has an additional option for 3m stages.
	
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchDiameter]] {
		@SUBTYPE[1.5m] {
			@name = 2.5m
		}

		@SUBTYPE[1.875m] {
			@name = 3m
		}
	}

 	-MODULE[TweakScale],* {}
}

// SPA 3.125m Payload Adapter - (bluedog_DeltaIV_DCSS_3p125_payloadAdapter)
@PART[bluedog_DeltaIV_DCSS_3p125_payloadAdapter]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size3p5

    @title = SPA 5m Payload Adapter
	@description = Standalone version of the payload adapter truss from the 5m DHSS fairing base.

 	-MODULE[TweakScale],* {}
}

// Daleth IV DHSS 3.125m Fairing Base - (bluedog_DeltaIV_DCSS_fairingBase)
@PART[bluedog_DeltaIV_DCSS_fairingBase]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @mass *= 1.6
    %rescaleFactor = 1.6
    @bulkheadProfiles = size4

    @title = Daleth IV DHSS 5m Fairing Base
	@description = 5m fairing base with integrated payload attach fitting truss.

 	-MODULE[TweakScale],* {}
}

//
// Tanks
//
// Daleth-III-DHSS Cryogenic Upper Stage - (bluedog_DCSS_Tank)
// Daleth-IV-DHSS Cryogenic Upper Stage - (bluedog_DeltaIV_DCSS_5m)
@PART[bluedog_DCSS_Tank,bluedog_DeltaIV_DCSS_5m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    %rescaleFactor = 1.6

    MODULE {
		name = ModuleFuelTanks
        volume = #$/RESOURCE[Oxidizer]/maxAmount$
        @volume = #$/RESOURCE[MonoPropellant]/maxAmount$
        @volume *= 5
		@volume += #$/RESOURCE[LqdHydrogen]/maxAmount$
        @volume *= 4.096

        type = CryoUpperstage
        
        TANK {
            name = Hydrazine
            amount = full
            maxAmount = #$/RESOURCE[MonoPropellant]/maxAmount$
            @maxAmount *= 20.48
        }
	}

    @MODULE[ModuleRCSFX],* {
        !resourceName = DELETE
        !PROPELLANT[*],* {}
        @RF10X_FUELS/HYDRAZINE/PROPELLANT {}
        @atmosphereCurve {
			@key,0 = 0 220
		}
    }

    MODULE { name = ModuleB9DisableTransform }
    @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[volumeSwitch]] {
        -parentID = 0
		@SUBTYPE:HAS[@NODE],* {
            @NODE,* {
                @position[1] /= 1.6
            }
        }
        @SUBTYPE:HAS[#volumeAddedToParent[>0]] {
            @volumeAddedToParent *= 20.48
        }
	}

 	!RESOURCE[*],* {}
 	-MODULE[TweakScale],* {}
}
// Daleth IV Medium Cryogenic Upper Stage - (bluedog_DCSS_Tank_IVM)
+PART[bluedog_DCSS_Tank]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @name = bluedog_DCSS_Tank_IVM
    @title = Daleth IV Medium Cryogenic Upper Stage
    @description = Daleth Hydrogen Second Stage. A large cryogenic upper stage with avionics and attitude control thrusters for the Daleth IV Medium, only missing an engine.
    @bulkheadProfiles = size4, size3p5, srf

    @MODULE[ModuleFuelTanks] {
		@volume += 10240
    }
    
    @MODULE[ModuleB9DisableTransform] { transform = delta3 }
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[volumeSwitch]] {
		!SUBTYPE:HAS[#transform[delta3]] {}
	}
}
// Daleth-III-DHSS Cryogenic Upper Stage - (bluedog_DCSS_Tank)
@PART[bluedog_DCSS_Tank]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @title = Daleth-III-DHSS Cryogenic Upper Stage
    @description = Daleth Hydrogen Second Stage. A large cryogenic upper stage with avionics and attitude control thrusters for the Daleth III, only missing an engine.
    @bulkheadProfiles = size4, size3p5, srf

    @MODULE[ModuleB9DisableTransform] { transform = delta4 }
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[volumeSwitch]] {
		!SUBTYPE:HAS[#transform[delta4]] {}
	}
}
// SLS-DHSS Cryogenic Upper Stage - (bluedog_DeltaIV_DCSS_5m_SLS)
+PART[bluedog_DeltaIV_DCSS_5m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @name = bluedog_DeltaIV_DCSS_5m_SLS
    @title = SLS-DHSS Cryogenic Upper Stage
    @description = Enlarged Daleth Hydrogen Second Stage for Heavy variants. A large cryogenic upper stage with avionics and attitude control thrusters, only missing an engine. Its a tight squeeze but a dual engine mount is available.
    @bulkheadProfiles = size3p5, size2p5, srf

    @MODULE[ModuleFuelTanks] {
		@volume += 5120
	}
    @MODULE[ModuleB9DisableTransform] { transform = ICPSlength }
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchLength]] {
		!SUBTYPE:HAS[#transform[ICPSlength]] {}
	}
}
// Daleth-IV-DHSS Cryogenic Upper Stage - (bluedog_DeltaIV_DCSS_5m)
@PART[bluedog_DeltaIV_DCSS_5m]:NEEDS[Bluedog_DB&RealFuels]:FOR[Z-RF-StockTo10x] {
    @title = Daleth-IV-DHSS Cryogenic Upper Stage
    @description = Enlarged Daleth Hydrogen Second Stage for Daleth IV Medium Plus. A large cryogenic upper stage with avionics and attitude control thrusters, only missing an engine. Its a tight squeeze but a dual engine mount is available.
    @bulkheadProfiles = size3p5, size2p5, srf
    
    @MODULE[ModuleB9DisableTransform] { transform = DCSSlength }
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchLength]] {
		!SUBTYPE:HAS[#transform[DCSSlength]] {}
	}
}